/* Critical Mobile Fixes for Scrolling Issues */

/* Force scrolling on all main containers */
.terminal-body {
    position: relative !important;
    overflow: hidden !important;
}

.info-panel,
.agent-memory-container, 
.terminal-output {
    position: relative !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    touch-action: pan-y !important;
}

/* Ensure containers fill available space */
.agent-memory-dashboard {
    max-height: 100% !important;
    overflow: hidden !important;
}

.memory-grid {
    max-height: 100% !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
}

/* Mobile-specific overrides */
@media (max-width: 768px) {
    .terminal-container {
        height: 100vh !important;
        height: 100dvh !important; /* Dynamic viewport height for mobile */
        overflow: hidden !important;
    }
    
    .terminal-body {
        height: calc(100vh - 120px) !important;
        height: calc(100dvh - 120px) !important;
        flex-direction: column !important;
        overflow: hidden !important;
    }
    
    /* Hide info panel on mobile - it's accessible via menu button */
    .info-panel {
        display: none !important;
    }
    
    .info-panel.open {
        display: flex !important;
    }
    
    .agent-memory-container {
        flex: 1 1 50% !important;
        min-height: 0 !important;
        max-height: 50% !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        display: block !important;
    }
    
    .terminal-output {
        flex: 1 1 50% !important;
        min-height: 0 !important;
        max-height: 50% !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        display: block !important;
    }
    
    /* Force proper scrolling behavior */
    .agent-memory-dashboard {
        height: 100% !important;
        max-height: 100% !important;
        overflow: hidden !important;
        display: flex !important;
        flex-direction: column !important;
    }
    
    .memory-grid {
        flex: 1 !important;
        min-height: 0 !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        touch-action: pan-y !important;
    }
}

/* Extra small screens */
@media (max-width: 480px) {
    .terminal-body {
        height: calc(100vh - 100px) !important;
        height: calc(100dvh - 100px) !important;
    }
}

/* Force scrollbar visibility on touch devices */
@media (hover: none) and (pointer: coarse) {
    .agent-memory-container::-webkit-scrollbar,
    .terminal-output::-webkit-scrollbar,
    .memory-grid::-webkit-scrollbar {
        width: 8px !important;
        background: rgba(255, 255, 255, 0.1) !important;
    }
    
    .agent-memory-container::-webkit-scrollbar-thumb,
    .terminal-output::-webkit-scrollbar-thumb,
    .memory-grid::-webkit-scrollbar-thumb {
        background: rgba(0, 255, 0, 0.3) !important;
        border-radius: 4px !important;
    }
}